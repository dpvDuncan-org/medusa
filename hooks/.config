#!/usr/bin/env bash

set +u
echo "variables (see https://docs.docker.com/docker-hub/builds/advanced/):"
echo "SOURCE_BRANCH:   $SOURCE_BRANCH"
echo "SOURCE_COMMIT:   $SOURCE_COMMIT"
echo "COMMIT_MSG:      $COMMIT_MSG"
echo "DOCKER_REPO:     $DOCKER_REPO"
echo "DOCKERFILE_PATH: ${DOCKERFILE_PATH:=./Dockerfile}"
echo "CACHE_TAG:       $CACHE_TAG"
echo "IMAGE_NAME:      $IMAGE_NAME"

declare -A docker_to_manifest_map=( ["aarch64"]="arm64/v8" ["arm"]="arm/v7" ["amd64"]="amd64")

# what we want to build
build_architectures=(arm amd64 aarch64)
set -u